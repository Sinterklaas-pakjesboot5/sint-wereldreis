<!doctype html>
<html lang="nl">
<head>
    <meta charset="utf-8">
    <title>Reis van de Sint</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body {
          font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
          max-width: 900px;
          margin: 2rem auto;
          padding: 0 1rem 3rem;
          line-height: 1.5;
        }
        h1 {
          font-size: 1.7rem;
          margin-bottom: 0.5rem;
        }
        p {
          margin: 0.2rem 0;
        }
        .image-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin: 1.2rem 0;
}

.image-item {
  border: 2px solid #ccc;
  padding: 0.35rem;
  background: #f7f7f7;
  cursor: grab;
  border-radius: 0.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
  flex: 0 0 calc(50% - 0.75rem); /* twee naast elkaar */
  box-sizing: border-box;
  display: flex;
  justify-content: center;
  aspect-ratio: 10 / 9;
}

.image-item img {
  width: 100%;
  height: auto;
  max-height: 100%;
  object-fit: contain;
  display: block;
  border-radius: 0.3rem;
}

        .image-item.drag-over {
          border-color: #0077ff;
          background: #e7f0ff;
        }
        #check-button {
          padding: 0.55rem 1.2rem;
          font-size: 1rem;
          border-radius: 0.5rem;
          border: 1px solid #444;
          background: #ffffff;
          cursor: pointer;
        }
        #check-button:hover {
          background: #f0f0f0;
        }
        #result-message {
          margin-top: 0.75rem;
          font-weight: bold;
          min-height: 1.3em;
        }
        #clue {
          margin-top: 1.5rem;
          padding: 1rem 1.2rem;
          border-radius: 0.7rem;
          background: #fff6d5;
          border: 1px solid #e0c570;
        }
    </style>
</head>
<body>
<h1>Orden de reis van de Sint</h1>
<p>Sleep de kaartjes in de juiste volgorde en klik daarna op <strong>Check</strong>.</p>
<p>Pas als alles klopt, onthult Sint een belangrijke hintâ€¦</p>

<div id="image-list" class="image-list">
    <div class="image-item" draggable="true" data-id="new_zealand">
        <img src="images/new_zealand.jpg" alt="Nieuw-Zeeland">
    </div>
    <div class="image-item" draggable="true" data-id="japan">
        <img src="images/japan.jpg" alt="Japan">
    </div>
    <div class="image-item" draggable="true" data-id="san_francisco">
        <img src="images/san_francisco.jpg" alt="San Francisco">
    </div>
    <div class="image-item" draggable="true" data-id="panama">
        <img src="images/panama.jpg" alt="Panama">
    </div>
    <div class="image-item" draggable="true" data-id="lapland">
        <img src="images/lapland.jpg" alt="Lapland">
    </div>
    <div class="image-item" draggable="true" data-id="istanbul">
        <img src="images/istanbul.jpg" alt="Istanbul">
    </div>
    <div class="image-item" draggable="true" data-id="scotland">
        <img src="images/scotland.jpg" alt="Schotland">
    </div>
</div>

<button id="check-button">Check</button>
<div id="result-message"></div>

<div id="clue" style="display: none;">
    <h2>Goed gedaan!</h2>
    <p>Hier komt jouw hint naar het cadeautje. Deze tekst kun je aanpassen in <code>index.html</code>.</p>
</div>

<script>
    const correctOrder = [
      "new_zealand",
      "japan",
      "san_francisco",
      "panama",
      "scotland",
      "lapland",
      "istanbul"
    ];

    const imageListElement = document.getElementById("image-list");
    const resultMessageElement = document.getElementById("result-message");
    const clueElement = document.getElementById("clue");
    const checkButtonElement = document.getElementById("check-button");

    let dragSourceElement = null;

    function shuffleImages() {
      const imageItemElements = Array.from(document.querySelectorAll(".image-item"));
      for (let index = imageItemElements.length - 1; index > 0; index -= 1) {
        const randomIndex = Math.floor(Math.random() * (index + 1));
        const temporaryElement = imageItemElements[index];
        imageItemElements[index] = imageItemElements[randomIndex];
        imageItemElements[randomIndex] = temporaryElement;
      }
      imageItemElements.forEach(function (imageItemElement) {
        imageListElement.appendChild(imageItemElement);
      });
    }

    function handleDragStart(event) {
      dragSourceElement = event.currentTarget;
      event.dataTransfer.effectAllowed = "move";
    }

    function handleDragOver(event) {
      event.preventDefault();
      const targetElement = event.currentTarget;
      targetElement.classList.add("drag-over");
    }

    function handleDragLeave(event) {
      const targetElement = event.currentTarget;
      targetElement.classList.remove("drag-over");
    }

    function handleDrop(event) {
      event.preventDefault();
      const targetElement = event.currentTarget;
      targetElement.classList.remove("drag-over");
      if (dragSourceElement === targetElement) {
        return;
      }
      const boundingRectangle = targetElement.getBoundingClientRect();
      const offsetFromTop = event.clientY - boundingRectangle.top;
      const shouldInsertBefore = offsetFromTop < boundingRectangle.height / 2;
      if (shouldInsertBefore) {
        imageListElement.insertBefore(dragSourceElement, targetElement);
      } else {
        imageListElement.insertBefore(dragSourceElement, targetElement.nextSibling);
      }
    }

    function setUpDragAndDrop() {
      const imageItemElements = document.querySelectorAll(".image-item");
      imageItemElements.forEach(function (imageItemElement) {
        imageItemElement.addEventListener("dragstart", handleDragStart);
        imageItemElement.addEventListener("dragover", handleDragOver);
        imageItemElement.addEventListener("dragleave", handleDragLeave);
        imageItemElement.addEventListener("drop", handleDrop);
      });
    }

    function readCurrentOrder() {
      const imageItemElements = document.querySelectorAll(".image-item");
      return Array.from(imageItemElements).map(function (imageItemElement) {
        return imageItemElement.getAttribute("data-id");
      });
    }

    function checkOrder() {
      const currentOrder = readCurrentOrder();
      const isCorrect = currentOrder.length === correctOrder.length &&
        currentOrder.every(function (value, index) {
          return value === correctOrder[index];
        });

      if (isCorrect) {
        resultMessageElement.textContent = "Perfect, de reis klopt!";
        clueElement.style.display = "block";
      } else {
        resultMessageElement.textContent = "Nog niet goed, probeer het nog eens.";
        clueElement.style.display = "none";
      }
    }

    shuffleImages();
    setUpDragAndDrop();
    checkButtonElement.addEventListener("click", checkOrder);
</script>
</body>
</html>
